<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout}">

<style>
    :root {
        --bg-main: #0f172a;
        --bg-card: #1e293b;
        --bg-soft: #020617;

        --primary: #38bdf8;
        --success: #22c55e;
        --warning: #facc15;
        --info: #818cf8;
        --danger: #ef4444;

        --text-main: #e5e7eb;
        --text-muted: #94a3b8;
    }

    /* Global */
    body {
        background: linear-gradient(135deg, #020617, #0f172a) !important;
        color: var(--text-main) !important;
    }

    /* Stats Card */
    .stat-card {
        background: linear-gradient(145deg, #1e293b, #020617) !important;
        border-radius: 18px !important;
        border-left: 6px solid !important;
        padding: 1.5rem !important;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4) !important;
        transition: all 0.3s ease !important;
    }

    .stat-card:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6) !important;
    }

    .stat-primary {
        border-left-color: var(--primary) !important;
    }

    .stat-success {
        border-left-color: var(--success) !important;
    }

    .stat-warning {
        border-left-color: var(--warning) !important;
    }

    .stat-info {
        border-left-color: var(--info) !important;
    }

    .stat-card h5 {
        font-size: 1.8rem !important;
        font-weight: 800 !important;
    }

    .stat-card .small {
        color: var(--text-muted) !important;
        letter-spacing: 1px;
    }

    /* Card */
    .card {
        background: var(--bg-card) !important;
        border-radius: 18px !important;
        border: none !important;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4) !important;
    }

    .card-header {
        background: linear-gradient(135deg, #020617, #1e293b) !important;
        color: var(--text-main) !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        font-weight: 700;
        letter-spacing: 1px;
    }

    /* Table */
    .table {
        background: transparent !important;
        color: var(--text-main) !important;
    }

    .table th {
        color: var(--text-muted) !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    }

    .table td {
        border-color: rgba(255, 255, 255, 0.05) !important;
    }

    /* Badge */
    .badge {
        border-radius: 999px !important;
        padding: 0.45rem 0.9rem !important;
        font-weight: 600 !important;
    }

    .bg-success {
        background: var(--success) !important;
    }

    .bg-warning {
        background: var(--warning) !important;
        color: #000 !important;
    }

    .bg-info {
        background: var(--info) !important;
    }

    .bg-danger {
        background: var(--danger) !important;
    }

    /* Button */
    .btn {
        border-radius: 12px !important;
        font-weight: 700 !important;
        transition: all 0.3s ease !important;
    }

    .btn-primary {
        background: linear-gradient(135deg, #38bdf8, #0ea5e9) !important;
        border: none !important;
    }

    .btn-success {
        background: linear-gradient(135deg, #22c55e, #16a34a) !important;
    }

    .btn-info {
        background: linear-gradient(135deg, #818cf8, #6366f1) !important;
    }

    .btn-warning {
        background: linear-gradient(135deg, #facc15, #eab308) !important;
        color: #000 !important;
    }

    .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
    }

    /* Animasi masuk */
    @keyframes fadeUp {
        from {
            opacity: 0;
            transform: translateY(25px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .stat-card,
    .card {
        animation: fadeUp 0.6s ease;
    }
</style>

<head>
    <title>Dashboard</title>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div layout:fragment="content">


        <!-- Stats Cards -->
        <div class="row mb-4">
            <div class="col-xl-3 col-md-6 mb-4">
                <div class="stat-card stat-primary">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <div class="text-uppercase text-secondary small mb-1">Total Produk</div>
                            <div class="h5 mb-0 font-weight-bold" id="totalProducts">3</div>
                        </div>
                        <div class="text-primary">
                            <i class="bi bi-box fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
                <div class="stat-card stat-success">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <div class="text-uppercase text-secondary small mb-1">Produk Tersedia</div>
                            <div class="h5 mb-0 font-weight-bold" id="inStockProducts">3</div>
                        </div>
                        <div class="text-success">
                            <i class="bi bi-check-circle fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
                <div class="stat-card stat-warning">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <div class="text-uppercase text-secondary small mb-1">Stok Rendah</div>
                            <div class="h5 mb-0 font-weight-bold" id="lowStockProducts">1</div>
                        </div>
                        <div class="text-warning">
                            <i class="bi bi-exclamation-triangle fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4">
                <div class="stat-card stat-info">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <div class="text-uppercase text-secondary small mb-1">Total Transaksi</div>
                            <div class="h5 mb-0 font-weight-bold" id="totalTransactions">2</div>
                        </div>
                        <div class="text-info">
                            <i class="bi bi-receipt fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="row mb-4">
            <div class="col-lg-6 mb-4">
                <div class="card shadow">
                    <div class="card-header py-3 d-flex justify-content-between align-items-center">
                        <h6 class="m-0 font-weight-bold">Produk Stok Rendah</h6>
                        <a th:href="@{/products}" class="btn btn-sm btn-primary">
                            <i class="bi bi-box me-1"></i>Lihat Semua
                        </a>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Produk</th>
                                        <th>Stok</th>
                                        <th>Harga</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Keyboard Mechanical</td>
                                        <td><span class="badge bg-warning">2</span></td>
                                        <td>Rp 1.200.000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 mb-4">
                <div class="card shadow">
                    <div class="card-header py-3 d-flex justify-content-between align-items-center">
                        <h6 class="m-0 font-weight-bold">Transaksi Terakhir</h6>
                        <a th:href="@{/transactions}" class="btn btn-sm btn-primary">
                            <i class="bi bi-receipt me-1"></i>Lihat Semua
                        </a>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Produk</th>
                                        <th>Tipe</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Laptop Gaming</td>
                                        <td><span class="badge bg-success">SALE</span></td>
                                        <td>Rp 30.000.000</td>
                                    </tr>
                                    <tr>
                                        <td>Mouse Wireless</td>
                                        <td><span class="badge bg-info">PURCHASE</span></td>
                                        <td>Rp 5.000.000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold">Aksi Cepat</h6>
                    </div>
                    <div class="card-body text-center">
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <button class="btn btn-success w-100" onclick="quickSale()">
                                    <i class="bi bi-cash-coin me-2"></i>Quick Sale
                                </button>
                            </div>
                            <div class="col-md-3 mb-3">
                                <button class="btn btn-info w-100" onclick="quickPurchase()">
                                    <i class="bi bi-cart-plus me-2"></i>Quick Purchase
                                </button>
                            </div>
                            <div class="col-md-3 mb-3">
                                <button class="btn btn-primary w-100" onclick="addProduct()">
                                    <i class="bi bi-plus-circle me-2"></i>Tambah Produk
                                </button>
                            </div>
                            <div class="col-md-3 mb-3">
                                <button class="btn btn-warning w-100" onclick="generateReport()">
                                    <i class="bi bi-file-earmark-pdf me-2"></i>Generate Report
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple dashboard script
        document.addEventListener('DOMContentLoaded', function () {
            console.log('Dashboard loaded with styling');

            // Quick actions
            function quickSale() {
                window.location.href = '/transactions?action=sale';
            }

            function quickPurchase() {
                window.location.href = '/transactions?action=purchase';
            }

            function addProduct() {
                window.location.href = '/products?action=add';
            }

            function generateReport() {
                alert('Fitur generate report akan segera hadir!');
            }

            // Make functions global
            window.quickSale = quickSale;
            window.quickPurchase = quickPurchase;
            window.addProduct = addProduct;
            window.generateReport = generateReport;
        });
    </script>
</body>

</html>