<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Transactions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-dark bg-dark px-3">
    <a class="navbar-brand" href="/dashboard">Kasir App</a>
    <div>
        <a class="btn btn-sm btn-light" href="/products">Products</a>
        <a class="btn btn-sm btn-light" href="/transactions">Transactions</a>
    </div>
</nav>

<div class="container mt-4">
    <h4>Manajemen Transaksi</h4>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Tanggal</th>
                <th>Produk</th>
                <th>Tipe</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody id="transactionsTableBody">
            <tr>
                <td colspan="5" class="text-center">Loading...</td>
            </tr>
        </tbody>
    </table>
</div>

<script>
async function loadTransactions() {
    const res = await fetch('/api/transactions');
    const data = await res.json();

    const tbody = document.getElementById('transactionsTableBody');
    tbody.innerHTML = data.map(t => `
        <tr>
            <td>${t.id}</td>
            <td>${t.createdAt}</td>
            <td>${t.product.name}</td>
            <td>${t.transactionType}</td>
            <td>Rp ${t.totalPrice}</td>
        </tr>
    `).join('');
}

document.addEventListener('DOMContentLoaded', loadTransactions);
</script>

</body>
</html>
